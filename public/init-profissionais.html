<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Inicializar Profissionais</title>
</head>
<body>
  <h1>Inicializar Profissionais no Sistema</h1>
  <button id="btnInit">Cadastrar Profissionais</button>
  <div id="resultado"></div>
  
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
    
    const firebaseConfig = {
      apiKey: "AIzaSyAqwvfNgFCKno8IYSmOQHual4Ks7tWIO1c",
      authDomain: "cia-da-beleza-beb00.firebaseapp.com",
      projectId: "cia-da-beleza-beb00",
      storageBucket: "cia-da-beleza-beb00.firebasestorage.app",
      messagingSenderId: "567844800760",
      appId: "1:567844800760:web:8f16e64daa0315a9ae130d"
    };
    
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    
    const profissionais = [
      {
        nome: "Ana Costa",
        email: "ana@salão.com",
        role: "profissional",
        ativo: true,
        especialidades: ["cabelereiro"],
        especialidade: "Cabeleireira",
        telefone: "(11) 98888-8888"
      },
      {
        nome: "Carlos Mendes",
        email: "carlos@salão.com",
        role: "profissional",
        ativo: true,
        especialidades: ["barbeiro"],
        especialidade: "Barbeiro",
        telefone: "(11) 97777-7777"
      },
      {
        nome: "Beatriz Silva",
        email: "beatriz@salão.com",
        role: "profissional",
        ativo: true,
        especialidades: ["manicure", "pedicure"],
        especialidade: "Manicure",
        telefone: "(11) 96666-6666"
      },
      {
        nome: "Ricardo Almeida",
        email: "ricardo@salão.com",
        role: "profissional",
        ativo: true,
        especialidades: ["massagista"],
        especialidade: "Massagista",
        telefone: "(11) 95555-5555"
      },
      {
        nome: "Fernanda Lima",
        email: "fernanda@salão.com",
        role: "profissional",
        ativo: true,
        especialidades: ["cabelereiro", "colorista"],
        especialidade: "Colorista",
        telefone: "(11) 94444-4444"
      }
    ];
    
    document.getElementById('btnInit').addEventListener('click', async () => {
      const resultado = document.getElementById('resultado');
      resultado.innerHTML = '<p>Cadastrando profissionais...</p>';
      
      let sucessos = 0;
      let erros = 0;
      
      for (const prof of profissionais) {
        try {
          const userId = prof.email.replace(/[@.]/g, '_');
          const userRef = doc(db, "users", userId);
          
          await setDoc(userRef, {
            nome: prof.nome,
            email: prof.email,
            role: prof.role,
            ativo: prof.ativo,
            especialidades: prof.especialidades,
            especialidade: prof.especialidade,
            telefone: prof.telefone,
            criadoEm: new Date(),
            online: false
          });
          
          resultado.innerHTML += `<p style="color: green">✅ ${prof.nome} - CADASTRADO</p>`;
          sucessos++;
        } catch (error) {
          resultado.innerHTML += `<p style="color: red">❌ ${prof.nome} - ERRO: ${error.message}</p>`;
          erros++;
        }
      }
      
      resultado.innerHTML += `<hr><h3>Resultado: ${sucessos} cadastrados, ${erros} erros</h3>`;
      resultado.innerHTML += `<p><strong>IMPORTANTE:</strong> Agora você precisa criar os usuários no Authentication do Firebase:</p>`;
      resultado.innerHTML += `<ol>
        <li>Acesse o <a href="https://console.firebase.google.com/" target="_blank">Firebase Console</a></li>
        <li>Vá em Authentication > Users</li>
        <li>Clique em "Add User"</li>
        <li>Use os emails acima e senha: 123456</li>
      </ol>`;
    });
  </script>
</body>
</html>
